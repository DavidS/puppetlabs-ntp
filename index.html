<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.5
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="puppet_class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="puppet_class_list.html"></iframe>

      <div id="content"><div id='filecontents'>
<h1 id="label-ntp">ntp</h1>

<h4 id="label-Table+of+Contents">Table of Contents</h4>
<ol><li>
<p><a href="#overview">Overview</a></p>
</li><li>
<p><a href="#module-description">Module Description - What the module does and
why it is useful</a></p>
</li><li>
<p><a href="#setup">Setup - The basics of getting started with ntp</a></p>
</li><li>
<p><a href="#usage">Usage - Configuration options and additional
functionality</a></p>
</li><li>
<p><a href="#reference">Reference - An under-the-hood peek at what the module
is doing and how</a></p>
</li><li>
<p><a href="#limitations">Limitations - OS compatibility, etc.</a></p>
</li><li>
<p><a href="#development">Development - Guide for contributing to the
module</a></p>
</li></ol>

<h2 id="label-Overview">Overview</h2>

<p>The ntp module installs, configures, and manages the NTP service.</p>

<h2 id="label-Module+Description">Module Description</h2>

<p>The ntp module handles installing, configuring, and running NTP across a
range of operating systems and distributions.</p>

<h2 id="label-Setup">Setup</h2>

<h3 id="label-Beginning+with+ntp">Beginning with ntp</h3>

<p><code>include &#39;::ntp&#39;</code> is enough to get you up and running.
If you wish to pass in parameters specifying which servers to use, then:</p>

<pre class="code ruby"><code class="ruby">class { &#39;::ntp&#39;:
  servers =&gt; [ &#39;ntp1.corp.com&#39;, &#39;ntp2.corp.com&#39; ],
}</code></pre>

<h2 id="label-Usage">Usage</h2>

<p>All interaction with the ntp module can be done through the main ntp class.
This means you can simply toggle the options in <code>::ntp</code> to have
full functionality of the module.</p>

<h3 id="label-I+just+want+NTP-2C+what-27s+the+minimum+I+need-3F">I just want NTP, what&#39;s the minimum I need?</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_include'>include</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>::ntp</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<h3 id="label-I+just+want+to+tweak+the+servers-2C+nothing+else.">I just want to tweak the servers, nothing else.</h3>

<pre class="code ruby"><code class="ruby">class { &#39;::ntp&#39;:
  servers =&gt; [ &#39;ntp1.corp.com&#39;, &#39;ntp2.corp.com&#39; ],
}</code></pre>

<h3 id="label-I-27d+like+to+make+sure+I+restrict+who+can+connect+as+well.">I&#39;d like to make sure I restrict who can connect as well.</h3>

<pre class="code ruby"><code class="ruby">class { &#39;::ntp&#39;:
  servers  =&gt; [ &#39;ntp1.corp.com&#39;, &#39;ntp2.corp.com&#39; ],
  restrict =&gt; [&#39;127.0.0.1&#39;],
}</code></pre>

<h3 id="label-I+just+want+to+install+a+client+that+can-27t+be+queried">I just want to install a client that can&#39;t be queried</h3>

<pre class="code ruby"><code class="ruby">class { &#39;::ntp&#39;:
  servers   =&gt; [&#39;ntp1.corp.com&#39;, &#39;ntp2.corp.com&#39;],
  restrict  =&gt; [
    &#39;default ignore&#39;,
    &#39;-6 default ignore&#39;,
    &#39;127.0.0.1&#39;,
    &#39;-6 ::1&#39;,
    &#39;ntp1.corp.com nomodify notrap nopeer noquery&#39;,
    &#39;ntp2.corp.com nomodify notrap nopeer noquery&#39;
  ],
}</code></pre>

<h3 id="label-I+only+want+to+listen+on+specific+interfaces-2C+not+on+0.0.0.0">I only want to listen on specific interfaces, not on 0.0.0.0</h3>

<p>Restricting ntp to a specific interface is especially useful on Openstack
nodes which may have numerous virtual interfaces.</p>

<pre class="code ruby"><code class="ruby">class { &#39;::ntp&#39;:
  servers  =&gt; [ &#39;ntp1.corp.com&#39;, &#39;ntp2.corp.com&#39; ],
  interfaces =&gt; [&#39;127.0.0.1&#39;, &#39;1.2.3.4&#39;]
}</code></pre>

<h3 id="label-I-27d+like+to+opt+out+of+having+the+service+controlled-3B+we+use+another+tool+for+that.">I&#39;d like to opt out of having the service controlled; we use another tool for that.</h3>

<pre class="code ruby"><code class="ruby">class { &#39;::ntp&#39;:
  servers        =&gt; [ &#39;ntp1.corp.com&#39;, &#39;ntp2.corp.com&#39; ],
  restrict       =&gt; [&#39;127.0.0.1&#39;],
  service_manage =&gt; false,
}</code></pre>

<h3 id="label-I-27d+like+to+configure+and+run+ntp-2C+but+I+don-27t+need+to+install+it.">I&#39;d like to configure and run ntp, but I don&#39;t need to install it.</h3>

<pre class="code ruby"><code class="ruby">class { &#39;::ntp&#39;:
  package_manage =&gt; false,
}</code></pre>

<h3 id="label-Looks+great-21+But+I-27d+like+a+different+template-3B+we+need+to+do+something+unique+here.">Looks great! But I&#39;d like a different template; we need to do something unique here.</h3>

<pre class="code ruby"><code class="ruby">class { &#39;::ntp&#39;:
  servers         =&gt; [ &#39;ntp1.corp.com&#39;, &#39;ntp2.corp.com&#39; ],
  restrict        =&gt; [&#39;127.0.0.1&#39;],
  service_manage  =&gt; false,
  config_epp      =&gt; &#39;different/module/custom.template.epp&#39;,
}</code></pre>

<h2 id="label-Reference">Reference</h2>

<h3 id="label-Classes">Classes</h3>

<h4 id="label-Public+Classes">Public Classes</h4>
<ul><li>
<p>ntp: Main class, includes all other classes.</p>
</li></ul>

<h4 id="label-Private+Classes">Private Classes</h4>
<ul><li>
<p>ntp::install: Handles the packages.</p>
</li><li>
<p>ntp::config: Handles the configuration file.</p>
</li><li>
<p>ntp::service: Handles the service.</p>
</li></ul>

<h3 id="label-Parameters">Parameters</h3>

<p>The following parameters are available in the <code>::ntp</code> class:</p>

<h4 id="label-broadcastclient"><code>broadcastclient</code></h4>

<p>Enable reception of broadcast server messages to any local interface.</p>

<h4 id="label-config"><code>config</code></h4>

<p>Specifies a file for ntp&#39;s configuration info. Valid options: string
containing an absolute path. Default value: &#39;/etc/ntp.conf&#39; (or
&#39;/etc/inet/ntp.conf&#39; on Solaris)</p>

<h4 id="label-config_dir"><code>config_dir</code></h4>

<p>Specifies a directory for the ntp configuration files. Valid options:
string containing an absolute path. Default value: undef</p>

<h4 id="label-config_file_mode"><code>config_file_mode</code></h4>

<p>Specifies a file mode for the ntp configuration file. Valid options: string
containing file mode. Default value: &#39;0664&#39;</p>

<h4 id="label-config_template"><code>config_template</code></h4>

<p>Specifies a file to act as a ERB template for the config file. Valid
options: string containing a path (absolute, or relative to the module
path). Example value: &#39;ntp/ntp.conf.erb&#39;. Validation error will be
thrown if this param is supplied as well as the <code>config_epp</code>
param.</p>

<h4 id="label-config_epp"><code>config_epp</code></h4>

<p>Specifies a file to act as a EPP template for the config file. Valid
options: string containing a path (absolute, or relative to the module
path). Example value: &#39;ntp/ntp.conf.epp&#39;. Validation error will be
thrown if this param is supplied as well as the
<code>config_template</code> param.</p>

<h4 id="label-disable_auth"><code>disable_auth</code></h4>

<p>Do not require cryptographic authentication for broadcast client, multicast
client and symmetric passive associations.</p>

<h4 id="label-disable_auth"><code>disable_auth</code></h4>

<p>Disables kernel time discipline.</p>

<h4 id="label-disable_dhclient"><code>disable_dhclient</code></h4>

<p>Disables <code>ntp-servers</code> in <code>dhclient.conf</code> to avoid
Dhclient from managing the NTP configuration.</p>

<h4 id="label-disable_monitor"><code>disable_monitor</code></h4>

<p>Disables the monitoring facility in NTP. Valid options: true or false.
Default value: true</p>

<h4 id="label-driftfile"><code>driftfile</code></h4>

<p>Specifies an NTP driftfile. Valid options: string containing an absolute
path. Default value: &#39;/var/lib/ntp/drift&#39; (except on AIX and
Solaris)</p>

<h4 id="label-fudge"><code>fudge</code></h4>

<p>Used to provide additional information for individual clock drivers. Valid
options: array containing strings that follow the <code>fudge</code>
command. Default value: [ ]</p>

<h4 id="label-iburst_enable"><code>iburst_enable</code></h4>

<p>Specifies whether to enable the iburst option for every NTP peer. Valid
options: true or false. Default value: false (except on AIX and Debian)</p>

<h4 id="label-interfaces"><code>interfaces</code></h4>

<p>Specifies one or more network interfaces for NTP to listen on. Valid
options: array. Default value: [ ]</p>

<h4 id="label-interfaces_ignore"><code>interfaces_ignore</code></h4>

<p>Specifies one or more ignore pattern for the NTP listener configuration
(e.g. all, wildcard, ipv6, …). Valid options: array. Default value: [ ]</p>

<h4 id="label-keys"><code>keys</code></h4>

<p>Distributes keys to keys file. Valid options: array of keys. Default value:
[ ]</p>

<h4 id="label-keys_controlkey"><code>keys_controlkey</code></h4>

<p>Specifies the key identifier to use with the ntpq utility. Valid options:
value in the range of 1 to 65,534 inclusive. Default value: &#39; &#39;</p>

<h4 id="label-keys_enable"><code>keys_enable</code></h4>

<p>Tells Puppet whether to enable key-based authentication. Valid options:
true or false. Default value: false</p>

<h4 id="label-keys_file"><code>keys_file</code></h4>

<p>Specifies the complete path and location of the MD5 key file containing the
keys and key identifiers used by ntpd, ntpq and ntpdc when operating with
symmetric key cryptography. Valid options: string containing an absolute
path. Default value: <code>/etc/ntp.keys</code> (except on RedHat and
Amazon, where it is <code>/etc/ntp/keys</code>).</p>

<h4 id="label-keys_requestkey"><code>keys_requestkey</code></h4>

<p>Specifies the key identifier to use with the ntpdc utility program. Valid
options: value in the range of 1 to 65,534 inclusive. Default value: &#39;
&#39;</p>

<h4 id="label-keys_trusted-3A"><code>keys_trusted</code>:</h4>

<p>Provides one or more keys to be trusted by NTP. Valid options: array of
keys. Default value: [ ]</p>

<h4 id="label-leapfile"><code>leapfile</code></h4>

<p>Specifies a leap second file for NTP to use. Valid options: string
containing an absolute path. Default value: &#39; &#39;</p>

<h4 id="label-logfile"><code>logfile</code></h4>

<p>Specifies a log file for NTP to use instead of syslog. Valid options:
string containing an absolute path. Default value: &#39; &#39;</p>

<h4 id="label-minpoll"><code>minpoll</code></h4>

<p>Tells Puppet to use non-standard minimal poll interval of upstream servers.
Valid options: 3 to 16. Default option: undef.</p>

<h4 id="label-maxpoll"><code>maxpoll</code></h4>

<p>Tells Puppet to use non-standard maximal poll interval of upstream servers.
Valid options: 3 to 16. Default option: undef, except FreeBSD (on FreeBSD
<code>maxpoll</code> set 9 by default).</p>

<h4 id="label-ntpsigndsocket"><code>ntpsigndsocket</code></h4>

<p>Tells NTP to sign packets using the socket in the ntpsigndsocket path. NTP
must be configured to sign sockets for this to work. Valid option: a path
to the socket directory; for example, for Samba it would be:</p>

<p>~~~~ ntpsigndsocket = usr/local/samba/var/lib/ntp_signd/ ~~~~</p>

<p>Default value: undef.</p>

<h4 id="label-package_ensure"><code>package_ensure</code></h4>

<p>Tells Puppet whether the NTP package should be installed, and what version.
Valid options: &#39;present&#39;, &#39;latest&#39;, or a specific version
number. Default value: &#39;present&#39;</p>

<h4 id="label-package_manage"><code>package_manage</code></h4>

<p>Tells Puppet whether to manage the NTP package. Valid options: true or
false. Default value: true</p>

<h4 id="label-package_name"><code>package_name</code></h4>

<p>Tells Puppet what NTP package to manage. Valid options: <a
href="string">Array</a>. Default value: [&#39;ntp&#39;] (except on AIX and
Solaris)</p>

<h4 id="label-panic"><code>panic</code></h4>

<p>Specifies whether NTP should “panic” in the event of a very large clock
skew. Applies only if <code>tinker</code> option set to “true” or in case
your environment is in virtual machine. Valid options: unsigned shortint
digit. Default value: 0 if environment is virtual, undef in all other
cases.</p>

<h4 id="label-peers"><code>peers</code></h4>

<p>List of ntp servers which the local clock can be synchronised against, or
which can synchronise against the local clock.</p>

<h4 id="label-preferred_servers"><code>preferred_servers</code></h4>

<p>Specifies one or more preferred peers. Puppet will append &#39;prefer&#39;
to each matching item in the <code>servers</code> array. Valid options:
array. Default value: [ ]</p>

<h4 id="label-restrict"><code>restrict</code></h4>

<p>Specifies one or more <code>restrict</code> options for the NTP
configuration. Puppet will prefix each item with &#39;restrict&#39;, so you
only need to list the content of the restriction. Valid options: array.
Default value for most operating systems:</p>

<p>~~~~ [ &#39;default kod nomodify notrap nopeer noquery&#39;, &#39;-6
default kod nomodify notrap nopeer noquery&#39;, &#39;127.0.0.1&#39;,
&#39;-6 ::1&#39;, ] ~~~~</p>

<p>Default value for AIX systems:</p>

<p>~~~~ [ &#39;default nomodify notrap nopeer noquery&#39;,
&#39;127.0.0.1&#39;, ] ~~~~</p>

<h4 id="label-servers"><code>servers</code></h4>

<p>Specifies one or more servers to be used as NTP peers. Valid options:
array. Default value: varies by operating system</p>

<h4 id="label-service_enable"><code>service_enable</code></h4>

<p>Tells Puppet whether to enable the NTP service at boot. Valid options: true
or false. Default value: true</p>

<h4 id="label-service_ensure"><code>service_ensure</code></h4>

<p>Tells Puppet whether the NTP service should be running. Valid options:
&#39;running&#39; or &#39;stopped&#39;. Default value: &#39;running&#39;</p>

<h4 id="label-service_manage"><code>service_manage</code></h4>

<p>Tells Puppet whether to manage the NTP service. Valid options: true or
false. Default value: true</p>

<h4 id="label-service_name"><code>service_name</code></h4>

<p>Tells Puppet what NTP service to manage. Valid options: string. Default
value: varies by operating system</p>

<h4 id="label-service_provider"><code>service_provider</code></h4>

<p>Tells Puppet which service provider to use for NTP. Valid options: string.
Default value: &#39;undef&#39;</p>

<h4 id="label-step_tickers_file"><code>step_tickers_file</code></h4>

<p>Location of the step tickers file on the managed system. Default value:
varies by operating system</p>

<h4 id="label-step_tickers_template"><code>step_tickers_template</code></h4>

<p>Location of the step tickers ERB template file. Default value: varies by
operating system. Validation error will be thrown if this is specified as
well as the <code>step_tickers_epp</code> param.</p>

<h4 id="label-step_tickers_epp"><code>step_tickers_epp</code></h4>

<p>Location of the step tickers EPP template file. Default value: varies by
operating system. Validation error will be thrown if this is specified as
well as the <code>step_tickers_template</code> param.</p>

<h4 id="label-stepout"><code>stepout</code></h4>

<p>Tells puppet to change stepout. Applies only if <code>tinker</code> value
is true. Valid options: unsigned shortint digit. Default value: undef.</p>

<h4 id="label-tos"><code>tos</code></h4>

<p>Tells Puppet to enable tos options. Valid options: true of false. Default
value: false</p>

<h4 id="label-tos_minclock"><code>tos_minclock</code></h4>

<p>Specifies the minclock tos option. Valid options: numeric. Default value: 3</p>

<h4 id="label-tos_minsane"><code>tos_minsane</code></h4>

<p>Specifies the minsane tos option. Valid options: numeric. Default value: 1</p>

<h4 id="label-tos_floor"><code>tos_floor</code></h4>

<p>Specifies the floor tos option. Valid options: numeric. Default value: 1</p>

<h4 id="label-tos_ceiling"><code>tos_ceiling</code></h4>

<p>Specifies the ceiling tos option. Valid options: numeric. Default value: 15</p>

<h4 id="label-tos_cohort"><code>tos_cohort</code></h4>

<p>Specifies the cohort tos option. Valid options: &#39;0&#39; or &#39;1&#39;.
Default value: 0</p>

<h4 id="label-tinker"><code>tinker</code></h4>

<p>Tells Puppet to enable tinker options. Valid options: true of false.
Default value: false</p>

<h4 id="label-udlc"><code>udlc</code></h4>

<p>Specifies whether to configure ntp to use the undisciplined local clock as
a time source. Valid options: true or false. Default value: false</p>

<h4 id="label-udlc_stratum"><code>udlc_stratum</code></h4>

<p>Specifies the stratum the server should operate at when using the
undisciplined local clock as the time source. It is strongly suggested that
this value be set to no less than 10 where ntpd may be accessible outside
your immediate, controlled network. Default value: 10</p>

<h2 id="label-Limitations">Limitations</h2>

<p>This module has been tested on <a
href="https://forge.puppetlabs.com/supported#compat-matrix">all
PE-supported platforms</a>, and no issues have been identified.
Additionally, it is tested (but not supported) on Solaris 10 and Fedora
20-22.</p>

<h2 id="label-Development">Development</h2>

<p>Puppet Labs modules on the Puppet Forge are open projects, and community
contributions are essential for keeping them great. We can’t access the
huge number of platforms and myriad of hardware, software, and deployment
configurations that Puppet is intended to serve.</p>

<p>We want to keep it as easy as possible to contribute changes so that our
modules work in your environment. There are a few guidelines that we need
contributors to follow so that we can have a chance of keeping on top of
things.</p>

<p>For more information, see our <a
href="https://docs.puppetlabs.com/forge/contributing.html">module
contribution guide.</a></p>

<h3 id="label-Contributors">Contributors</h3>

<p>To see who&#39;s already involved, see the <a
href="https://github.com/puppetlabs/puppetlabs-ntp/graphs/contributors">list
of contributors.</a></p>
</div></div>

      <div id="footer">
  Generated on Sun Oct  9 20:48:19 2016 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.5 (ruby-2.3.1).
</div>

    </div>
  </body>
</html>